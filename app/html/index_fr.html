<!DOCTYPE html>
<html>

<head>
    <title>Frame | Escartem</title>
    <link rel="stylesheet" type="text/css" href="../css/normalize.css">
    <style>
    .fade-in {
        animation: fadeIn ease 2s;
    }
    @keyframes fadeIn {
        0% { opacity: 0; }
        100% { opacity: 100; }
    }

    html, body {
        height: 100%;
    }

    .border {
        position: fixed;
        top: 0; right: 0; bottom: 0; left: 0;
        border-color: rgb(99, 99, 99);
        border-radius: 10px;
        border-width: 10px;
        border: solid rgba(62, 73, 83, 1) 4px;
    }

    .main {
        position: relative;
        -webkit-app-region: drag;
        height: 100%;
        width: 100%;
        background-color: white;
        border-color: white;
        border-radius: 6px;
    }

    .img {
        position: relative;
        top: 5px;
        left: 5px;
    }

    .no-drag {
        -webkit-app-region: no-drag;
    }

    .btn-close, .btn-minmax, .btn-min {
        width: 13px;
        -webkit-app-region: no-drag;
    }

    .btn-close:hover {
        opacity: 0.6;
    }

    .btn-minmax:hover {
        opacity: 0.6;
    }

    .btn-min:hover {
        opacity: 0.6;
    }

    /*
        .img:hover > img {
            background-color:#000;
            opacity:0.5;
        }
        */

    .closeAnimation {
        -webkit-animation: fadeout 1s linear 1 forwards;
    }

    @-webkit-keyframes fadeout {
        0% {
            opacity: 1;
            background-color: transparent;
        }

        15% {
            opacity: 1;
            background-color: transparent;
        }

        75% {
            opacity: 0;
            background-color: transparent;
        }

        100% {
            opacity: 0;
            background-color: rgba(62, 73, 83, 1);
        }
    }

    .hidden {
        display: none;
    }

    </style>
</head>

<body>
    <div id="close-anim">
        <div class="fade-in">
            <div class="fade">
                <div class="border">
                    <div class="main">
                        <div class="img">
                            <div class="overlay">
                                <img src="https://escartem.github.io/electron/frame/1.1.1/close.png" id="closeApp" width="13" height="13" class="btn-close" alt="Fermer" title="Fermer" onclick="closeFunction()">
                                <img src="https://escartem.github.io/electron/frame/1.1.1/MinMax.png" id="MinMax" width="13" height="13" class="btn-minmax" alt="Plein écran" title="Plein écran">
                                <img src="https://escartem.github.io/electron/frame/1.1.1/minimize.png" id="minimizeApp" width="13" height="13" class="btn-min" alt="Réduire" title="Réduire">
                            </div>
                        </div>
                        <iframe src="about:blank" title="Main" width=100% height=97% frameBorder="0" scrolling="no" id="mainFrame"></iframe>
                    </div>
                </div>
                <script>
                    var appVersion = require('electron').remote.app.getVersion();
                    //console.log(appVersion);
                    const frame = document.getElementById("mainFrame");
                    frame.src = "https://escartem.github.io/electron/frame/V3/indexV3?version=" + appVersion + "&lang=fr";
                </script>
                <script>
                const { ipcRenderer } = require('electron');
                const closeApp = document.getElementById('closeApp');
                const minimizeApp = document.getElementById('minimizeApp');
                const MinMax = document.getElementById('MinMax')
                function closeFunction() {
                    document.getElementById('close-anim').classList.add("closeAnimation");
                    setTimeout(() => {
                        ipcRenderer.send('close-me')
                    }, 1000);
                }
                minimizeApp.addEventListener('click', () => {
                    ipcRenderer.send('minimize')
                });
                MinMax.addEventListener('click', () => {
                    ipcRenderer.send('MinMax')
                });
                </script>
                <script>
                require('../js/renderer.js')
                </script>
            </div>
        </div>
    </div>
</body>

</html>